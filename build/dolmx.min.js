!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.dolmx=t()}(this,function(){"use strict";function e(e){return(e||"").replace(/^([^\w]|\s)+/g,"").replace(/([^\w]|\s)+$/g,"")}function t(t){var r={};return e(t).split(/['"]\s+/).map(function(t){if(t=e(t)){var n=t.split(/=['"]/),i=e(n[0]);if(i)r[i]=e(n[1]).replace(/^("|')(.*)\1$/,"$2")||!0}}),r}return function r(n){var i=/^<\??([a-z][\w\.\-]*)(\s[^>]*?)?[\/\?]>|^<([a-z][\w\.\-]*)(\s.*?)?>((?:(?!<\3).)*)<\/\3>|^<([\w\-]+)(\s+.*?)?>((?:<\6.*?<\/\6>|<\6[^>]*?\/>|(?:(?!<\6).)*)*)<\/\6>/gim,s=/^<!\[CDATA\[(.*?)\]\]>$/im,u=void 0,a=void 0,o=void 0,f={};if(n=n.replace(/\s*\n+\s*/gm,""),!/^</.test(n))return{_value:n};if(s.test(n))return{_value:n.replace(s,"$1")};for(;u=i.exec(n);)n=n.substring(0,u.index)+n.substring(u.index+u[0].length),i.lastIndex=0,u[1]?(a=e(u[1]),o={_attr:t(u[2])}):u[3]?(a=e(u[3]),o={},u[5]&&(o=r(u[5])),o._attr=t(u[4])):u[6]&&(a=e(u[6]),o={},u[8]&&(o=r(u[8])),o._attr=t(u[7])),f[a]?(Array.isArray(f[a])||(f[a]=[f[a]]),f[a].push(o)):f[a]=o;return f}});
