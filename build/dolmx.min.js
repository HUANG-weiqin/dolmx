!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.dolmx=t()}(this,function(){"use strict";function e(e){return(e||"").replace(/^([^\w]|\s)+/g,"").replace(/([^\w]|\s)+$/g,"")}function t(t){var r={};return e(t).split(/['"]\s+/).forEach(function(t){var n=e(t);if(n){var i=n.split(/=['"]/),s=e(i[0]);if(s)r[s]=e(i[1]).replace(/^("|')(.*)\1$/,"$2")||!0}}),r}return function r(n){var i=/^<\??([a-z][\w\.\-]*)(\s[^>]*?)?[\/\?]>|^<([a-z][\w\.\-]*)(\s.*?)?>((?:(?!<\3).)*)<\/\3>|^<([\w\-]+)(\s+.*?)?>((?:<\6.*?<\/\6>|<\6[^>]*?\/>|(?:(?!<\6).)*)*)<\/\6>/gim,s=/^<!\[CDATA\[(.*?)\]\]>$/im,u={},a=void 0,o=void 0,f=void 0,c=n;if(c=c.replace(/\s*\n+\s*/gm,""),!/^</.test(c))return{_value:c};if(s.test(c))return{_value:c.replace(s,"$1")};for(a=i.exec(c);a;)c=c.substring(0,a.index)+c.substring(a.index+a[0].length),i.lastIndex=0,a[1]?(o=e(a[1]),f={_attr:t(a[2])}):a[3]?(o=e(a[3]),f={},a[5]&&(f=r(a[5])),f._attr=t(a[4])):a[6]&&(o=e(a[6]),f={},a[8]&&(f=r(a[8])),f._attr=t(a[7])),u[o]?(Array.isArray(u[o])||(u[o]=[u[o]]),u[o].push(f)):u[o]=f,a=i.exec(c);return u}});
